# AskAnything

AskAnything 是一个AI侧边浮标浏览器插件，旨在提供智能化的辅助功能。

<img src="./images/AskAnything_icon.jpg" width="200"/>

一款Chrome浏览器扩展，提供即时AI问答功能，支持多种大语言模型。 **要使用AI功能，你需要自行在扩展的选项页面中配置相应的API密钥。**

## 功能特点

- 🎯 **浮动按钮** - 页面右侧随时可见的浮标，支持拖拽。
- ⚙️ **选项页面** - 用于配置不同AI模型的API密钥和可选的自定义API端点。
- 🧠 **多模型支持** - 支持ChatGPT, Claude, DeepSeek, 通义千问 (需用户自行提供并配置API密钥)。
- 📝 **上下文感知** - 自动获取选中文本或页面信息，并将其包含在发送给AI的请求中。
- 📊 **流式回复** - 实时流式显示AI回答。
- 🔍 **本地历史** - 使用 `chrome.storage.local` 存储最近50条对话历史。
- ⌨️ **快捷键支持** - `Alt+Shift+A` (可修改) 快速访问。
- 📑 **右键菜单** - 选中文本右键询问。

## ⚠️ 重要：API密钥配置

为了使用 AskAnything 的AI问答功能，你**必须**提供你自己账户的大模型和搜索API密钥。本扩展**不会**收集或存储你的密钥到任何远程服务器，密钥仅安全地存储在你本地浏览器的 `chrome.storage.local` 中。

**配置步骤:**

1.  **安装扩展**: 首先按照下面的"本地测试"步骤加载扩展。
2.  **打开选项页面**: 
    *   在Chrome浏览器右上角的扩展程序图标列表中，找到 AskAnything 图标。
    *   右键点击该图标，选择"选项"。
    *   (或者，在浏览器地址栏输入 `chrome://extensions`，找到该扩展，点击"详细信息"，然后选择"扩展程序选项")。
3.  **输入API密钥**: 在选项页面中，为你想使用的AI模型提供商（如 OpenAI, Anthropic 等）输入对应的API密钥。
4.  **(可选) 自定义API端点**: 如果你需要使用代理服务器或者特定区域的API端点，可以在相应的字段中输入。
5.  **保存设置**: 点击保存按钮。

**只有正确配置了API密钥，对应的AI模型才能正常工作。**

## 开发设置

### 前提条件

- Node.js v18+
- npm v8+

### 安装依赖

```bash
npm install
```

### 开发模式

启动开发服务器，代码更改时会自动重新构建。

```bash
npm run dev
```

### 构建扩展

为生产环境构建优化后的扩展。

```bash
npm run build
```

构建的扩展将位于`dist`目录中。

## 本地测试 (加载已解压的扩展)

1.  运行 `npm run build` 生成 `dist` 目录。
2.  打开Chrome浏览器，导航至 `chrome://extensions`。
3.  启用页面右上角的"开发者模式"开关。
4.  点击左上角的"加载已解压的扩展程序"按钮。
5.  选择项目的 `dist` 目录。
6.  **重要**: 扩展加载后，请务必**配置API密钥** (参见上面的"API密钥配置"部分)。

## 如何使用

配置好API密钥后，可以通过以下方式激活 AskAnything 侧边栏：

1.  **点击浮动按钮**: 点击页面右侧的蓝色圆形浮动按钮。
3.  **快捷键**: 使用快捷键 `Alt+Shift+A` (可以在 `chrome://extensions/shortcuts` 中修改)。

打开侧边栏后：
- 在顶部的下拉菜单中选择你想使用的AI模型。
- 在底部的输入框中输入你的问题。
- 按回车或点击发送按钮。
- AI的回答将以流式方式显示在聊天区域。
- 可以点击"停止"按钮中断当前的AI回答。

## 项目结构

```
├── assets/              # 图标等静态资源
├── dist/                # 构建输出目录
├── docs/                # 项目文档
├── src/
│   ├── content-script.ts  # 内容脚本 (注入浮标, 页面交互)
│   ├── service-worker.ts  # 后台脚本 (事件处理, API调用, 核心逻辑)
│   ├── shared/          # 共享类型和工具 (models.ts, history.ts, settings.ts)
│   ├── sidepanel/       # 侧边栏UI (React, Zustand, components/)
│   └── options/         # 选项页面 (用于配置API密钥等)
├── vite.config.ts       # Vite构建配置
├── manifest.json        # 扩展清单文件
├── package.json         # 项目依赖和脚本
└── ...
```

## MCP集成

请注意，本项目由于是插件，所以只能实现MCP中的SSE和Streamable HTTP协议，故而推荐使用[mcp-proxy](https://github.com/sparfenyuk/mcp-proxy)作为使用stdio协议的MCP srever代理，具体使用方法请参考其项目。

## 📚 详细文档

更详细的关于项目架构、各个组件（Content Script, Service Worker, Sidepanel）以及共享模块的说明，请参阅 [./docs/index.md](./docs/index.md) 目录下的文档。

## 🚀 未来计划

我致力于持续改进 AskAnything 并为其添加更多强大的功能。以下是我未来的一些开发计划：

-   **增强搜索工具**: 
    -   集成效果更好、更智能的本地或在线搜索工具，以提供更精准的上下文信息和答案来源。
-   **多模态能力**: 
    -   引入多模态模型，使 AskAnything 能够"看见"浏览器当前页面内容（例如，理解图片和视频、分析页面结构），从而提供更丰富的交互和辅助。
-   **高级笔记记录**: 
    -   开发更详细和结构化的笔记记录功能，允许用户方便地保存、组织和回顾与AI的讨论内容或从网页中提取的关键信息。

欢迎社区的建议和贡献，如果您对未来的功能有任何想法，请告诉我！

## 🤝 参与贡献

欢迎各种形式的贡献！如果您有任何想法、建议或发现bug，请随时提出Issue或提交Pull Request。

## 许可证

MIT 